# Example 26: SQL Dump and Restore

This example demonstrates complete database export to SQL format with BLOB support and restoration.

## What you'll learn

- Export entire database to SQL file
- BLOB columns exported as X'hexadecimal' format
- Export schema (tables, indexes, views, triggers)
- Import/restore SQL dump to new database
- Data integrity verification

## Key concepts

### Export to SQL

```pascal
procedure ExportDatabaseToSQL(AConnection: TNDXSQLiteConnection; const AFilePath: string);
```

Exports:
- Table structure (CREATE TABLE)
- Data with proper escaping
- BLOBs as `X'0011AABBCC...'`
- Indexes, views, triggers

### BLOB to Hexadecimal

```pascal
function BlobToHex(AField: TField): string;
// Returns: X'00112233AABBCCDD...'
```

### Import from SQL

```pascal
procedure ImportSQLToDatabase(AConnection: TNDXSQLiteConnection; const AFilePath: string);
```

- Parses SQL statements
- Handles multi-line statements
- Skips comments
- Reports errors without stopping

## SQL dump format

```sql
-- SQLite Database Dump
-- Generated by NDXSQLite Example 26
-- BLOBs are exported as X'hexadecimal'

PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;

-- Table: users
CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT, avatar BLOB);

INSERT INTO users VALUES (1, 'Alice', X'00112233445566778899AABBCCDDEEFF');
INSERT INTO users VALUES (2, 'Bob', X'DEADBEEFCAFEBABE');

-- Indexes
CREATE INDEX idx_users_email ON users(email);

-- Views
CREATE VIEW user_summary AS SELECT id, name FROM users;

-- Triggers
CREATE TRIGGER update_timestamp AFTER UPDATE ON users BEGIN ... END;

COMMIT;
PRAGMA foreign_keys=ON;
```

## Use cases

- Database backup in human-readable format
- Version control for database schema and data
- Migration between systems
- Database cloning
- Debugging and inspection

## Building

```bash
lazbuild SQLDumpRestore.lpi
```

## Running

```bash
./SQLDumpRestore      # Linux/macOS
SQLDumpRestore.exe    # Windows
```

## Cross-Platform

This example works on Windows, Linux, and macOS.
